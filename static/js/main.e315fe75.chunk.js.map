{"version":3,"sources":["Home.js","components/Logo.js","data.js","AllCourses.js","utils.js","AllVideos.js","VideoNotes.js","App.js","index.js"],"names":["Search","Input","Home","className","NameLogo","VideoLink","NotesLink","src","alt","_VideoLink","props","onSearch","val","id","getVideoId","setState","error","history","push","state","inputRef","this","focus","cursor","startsWith","console","log","url","URL","e","host","pathname","searchParams","get","errMsg","placeholder","ref","input","allowClear","enterButton","CaretRightOutlined","React","Component","withRouter","icon","style","display","fontSize","useHistory","type","size","shape","alignItems","onClick","ev","Logo","clicked","Object","assign","height","background","borderRadius","padding","notes","videos","title","length","JSON","parse","stringify","image","data","cid1","code","name","vcount","active","cid2","cid3","cid4","cid5","cid6","unclassified","window","Panel","Collapse","AllCourses","currentCourseDetails","currentCourse","toggleAdd","addModal","toggleEdit","key","editModal","toggleArchive","archiveModal","toggleUnArchive","unArchiveModal","toggleDelete","deleteModal","addModalBody","codeInputRef","nameInputRef","editModalBody","defaultValue","archiveModalBody","unArchiveModalBody","deleteModalBody","addCourse","value","cid","Date","now","toString","message","success","editCourse","archiveCourse","unArchiveCourse","deleteCourse","objs","keys","Nav","onAddCourse","defaultActiveKey","ghost","expandIconPosition","header","filter","map","Course","onEdit","onArchive","onDelete","onUnArchive","visible","okText","onOk","onCancel","destroyOnClose","cancelText","WarningFilled","okType","cancelButtonProps","width","PlusOutlined","menu","courseCardMenu","overlay","trigger","placement","overlayClassName","SettingFilled","stopPropagation","domEvent","Item","Divider","danger","isEmpty","obj","constructor","secToStr","sec","hr","Math","floor","min","hs","padStart","ms","ss","video_id","a","decodeQueryString","queryString","keyValPair","keyValPairs","r","_i","_len","split","decodeURIComponent","lsig","URLSearchParams","decodeStreamMap","player_response","quality","_ref","sources","streamingData","formats","stream","mimeType","original_url","getSource","video","exact","lowest","source","includes","match","fetch","headers","response","text","video_info","status","res","videoDetails","join","thumbnail","thumbnails","filterNotesByTags","tags","note","some","tag","AllVideos","goToHome","getCid","params","getTagsOpts","tagOptions","label","updateFilter","location","filterTags","forEach","append","replace","onVideoDeleted","vid","forceUpdate","getNav","options","mode","showSearch","onDropdownVisibleChange","open","filterOpen","onChange","SearchOutlined","getSearchResults","vids","s","q","search","getAll","course","Video","onDeleted","ncount","onDeleteing","content","Modal","confirm","h","m","time","Note","timestamp","TextArea","getVideoCourse","found","find","VideoNotes","onNoteEditing","nid","editingNote","onNoteEdited","update","uNote","lectureDetails","i","findIndex","sort","n1","n2","newNote","onNoteDeleted","lecture","newLecture","uIndex","editVideoDetails","onNoteAdded","random","round","document","querySelector","currentTime","pinned","pause","updateTitleClass","oldCid","newCid","tempEdits","class","v","unshift","editingLecture","getTitleModal","opts","getCourseOpts","target","getLoadingDOM","ytDetails","getVideoDetails","getYTDetails","then","parseInt","loading","noteHasTag","editable","EditOutlined","when","_","color","editMode","onEditing","onEdited","marginRight","PushpinFilled","PushpinOutlined","onTimestamp","getEditMenu","onDone","editData","timeUpdated","timeStr","str","strToSec","contentUpdated","getEditBody","isNew","timeFormat","defaultTime","moment","buttons","format","showNow","rows","createRef","oProps","current","scrollIntoView","behavior","block","VideoPlayer","getVideoDOM","autoPlay","controls","tip","player","observer","ResizeObserver","el","offsetWidth","observe","rootClass","App","path","CourseNotes","About","NoMatch","useParams","courseId","videoId","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.e315fe75.chunk.js","sourcesContent":["import React from \"react\";\nimport { withRouter, useHistory } from \"react-router-dom\";\nimport { Input, Button } from 'antd';\nimport { CaretRightOutlined } from '@ant-design/icons';\n\nimport \"./Home.css\"\n\nconst { Search } = Input;\n\nexport default function Home() {\n  return (\n    <div className=\"home-shell\">\n      <div className=\"home-content\">\n        <NameLogo />\n        <VideoLink />\n        <p className=\"or-seperator\">OR</p>\n        <NotesLink />\n      </div>\n    </div>\n  )\n}\n\nfunction NameLogo(){\n  return (\n    <div className=\"logo-panel\">\n        <h1>FlowNotes</h1>\n        <img src=\"/logo192.png\" alt=\"FlowNotes Logo\"/>\n    </div>\n  )\n}\n\nclass _VideoLink extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {error:false}\n    this.inputRef = null\n  }\n\n  componentDidMount(){\n    this.inputRef.focus({\n      cursor: 'end',\n    });\n  }\n\n  onSearch = val => {\n    if (val === \"\") {\n      return\n    }\n    let id = this.getVideoId(val)\n    if(id === \"\") {\n      this.setState({error: true})\n    }\n    else{\n      this.props.history.push(`/video/${id}`)\n    }\n  }\n\n  getVideoId(val){\n    if(!val.startsWith(\"http\")){\n      val = \"https://\"+val\n      console.log(val)\n    }\n    let url = \"\"\n    try {\n      url = new URL(val)\n    } catch(e) {\n      console.log(e)\n      return \"\"\n    }\n  \n    if ((url.host == \"www.youtube.com\" || url.host == \"youtube.com\") && \n        (url.pathname == \"/watch\")){\n          return url.searchParams.get(\"v\")\n    }\n    // should I also confirm url isn't a 404?\n    return \"\"\n  }\n\n  render(){\n    const errMsg = <p className=\"err-msg\">Please ensure that the URL is formatted correctly!</p>\n    return (\n        <div className=\"video-link-form\">\n            <h2>Video Link</h2>\n            <p>To start or continue taking notes on a video.</p>\n            <Search\n              placeholder=\"Enter video link\"\n              ref={input =>  this.inputRef = input }\n              allowClear\n              enterButton={<CaretRightOutlined />}\n              onSearch={this.onSearch}\n            />\n            {this.state.error? errMsg : null}\n        </div>\n    )\n  }\n}\n\nconst VideoLink = withRouter(_VideoLink);\n\n\nfunction NotesLink(){\n  const icon = <CaretRightOutlined style={{display:\"flex\", fontSize:\"22px\"}}/>\n  const btnStyle = {display:\"flex\", alignItems:\"center\"}\n  let history = useHistory()\n\n  const toNotesManager = ev => {\n    history.push(\"/notes\")\n  }\n  return (\n    <div className=\"notes-link\">\n        <Button\n          type=\"primary\"\n          size=\"large\"\n          shape=\"round\"\n          style={btnStyle}\n          onClick={toNotesManager}\n          >\n            Notes Manager {icon}\n        </Button>\n        <p>To view your previous notes</p>\n    </div>\n  )\n}","import React from \"react\";\n\n\nexport default function Logo(props){\n  const clicked = props.onClick\n  let style = props.style || {}\n  style = Object.assign({\n                          height:\"100px\",\n                          background:\"#1f1f1f\",\n                          borderRadius:\"20%\",\n                          padding: \"7px\",\n                          cursor: \"pointer\"\n                        }, style)\n  return (\n    <img className=\"logo\"\n         src=\"/logo192.png\"\n         alt=\"FlowNotes Logo\"\n         style={style}\n         onClick={clicked}\n    />\n  )\n}","let notes = [\n  {\n    \"id\":\"nid1\",\n    \"timestamp\":190,\n    \"content\":\"Test content\",\n    \"tags\":[ \"git\", \"html\", \"vcs\"]\n  },\n  {\n    \"id\":\"nid2\",\n    \"timestamp\":255,\n    \"content\":\"Test content\",\n    \"tags\":[ \"exam\", \"logistics\"]\n  },\n  {\n    \"id\":\"nid3\",\n    \"timestamp\":441,\n    \"content\":\"Test content\",\n    \"tags\":[\"web\",\"animation\",\"git\"]\n  },\n  {\n    \"id\":\"nid4\",\n    \"timestamp\":590,\n    \"content\":\"Test content\",\n    \"tags\":[\"css\",\"js\",\"design\"]\n  },\n  {\n    \"id\":\"nid5\",\n    \"timestamp\":681,\n    \"content\":\"Test content\",\n    \"tags\":[\"exam\"]\n  },\n  {\n    \"id\":\"nid6\",\n    \"timestamp\":1220,\n    \"content\":\"Test content\",\n    \"tags\":[\"web\",\"html\",\"js\"]\n  },\n  {\n    \"id\":\"nid7\",\n    \"timestamp\":1554,\n    \"content\":\"Test content\",\n    \"tags\":[\"design\",\"web\",\"exam\"]\n  }\n]\n\nlet videos = [\n  {\n    id : \"90QvQ3p6brk\",\n    title: \"L15 - Software Engineering in practice\",\n    length: 48, //in min\n    notes: JSON.parse(JSON.stringify(notes)),\n    image: \"/thumbnails/th1.jpg\"\n  },\n  {\n    id : \"LzELw8k1FEY\",\n    title: \"L14 - Time management and estimation\",\n    length: 51, //in min\n    notes: JSON.parse(JSON.stringify(notes)),\n    image: \"/thumbnails/th2.jpg\"\n  },\n  {\n    id : \"eRcAf69IdCk\",\n    title: \"L13 - Agile and sprints\",\n    length: 48, //in min\n    notes: JSON.parse(JSON.stringify(notes)),\n    image: \"/thumbnails/th3.jpg\"\n  },\n  {\n    id : \"TVpGb5Jj0GY\",\n    title: \"L12 - Why your manager is wrong\",\n    length: 56, //in min\n    notes: JSON.parse(JSON.stringify(notes)),\n    image: \"/thumbnails/th4.jpg\"\n  },\n  {\n    id : \"kzvt3g8pUHQ\",\n    title: \"L11 - Version control and automation\",\n    length: 43, //in min\n    notes: JSON.parse(JSON.stringify(notes)),\n    image: \"/thumbnails/th5.jpg\"\n  },\n  {\n    id : \"4NKaIclN2fk\",\n    title: \"L10 - Software Engineering in practice\",\n    length: 58, //in min\n    notes: JSON.parse(JSON.stringify(notes)),\n    image: \"/thumbnails/th6.jpg\"\n  },\n]\n\nlet data = {\n  cid1 : {\n    code: \"CSE 110\",\n    name: \"Software Engineering\",\n    vcount: 14, //TODO: this should go, update AllCourses\n    active: true,\n    videos: JSON.parse(JSON.stringify(videos))\n  },\n  cid2 : {\n    code: \"CSE 141\",\n    name: \"Introduction to Computer Architecture\",\n    vcount: 12,\n    active: true,\n    videos: JSON.parse(JSON.stringify(videos))\n  },\n  cid3 : {\n    code: \"CSE 121\",\n    name: \"Systems Design\",\n    vcount: 15,\n    active: true,\n    videos: JSON.parse(JSON.stringify(videos))\n  },\n  cid4 : {\n    code: \"CSE 101\",\n    name: \"Computational Thinking\",\n    vcount: 9,\n    active: true,\n    videos: JSON.parse(JSON.stringify(videos))\n  },\n  cid5 : {\n    code: \"CSE 100\",\n    name: \"Basic CS stuff\",\n    vcount: 15,\n    active: false,\n    videos: JSON.parse(JSON.stringify(videos))\n  },\n  cid6 : {\n    code: \"CSE 111\",\n    name: \"Web design and development\",\n    vcount: 9,\n    active: false,\n    videos: JSON.parse(JSON.stringify(videos))\n  },\n  unclassified : {\n    code: \"Unclassified\",\n    name: \"Videos which belong to no class\",\n    vcount: 0,\n    active: true,\n    videos: []\n  }\n}\n\nexport default data\n\nwindow.data = data","import React from \"react\"\nimport Logo from \"./components/Logo\"\nimport { Dropdown, Menu, Modal, Input, Collapse, message } from \"antd\"\nimport { PlusOutlined, SettingFilled, WarningFilled } from '@ant-design/icons'\nimport { useHistory } from \"react-router-dom\";\nimport data from \"./data\"\nimport \"./AllCourses.css\"\nconst { Panel } = Collapse;\n\n\nexport default class AllCourses extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      addModal: false,\n      editModal: false,\n      archiveModal: false,\n      deleteModal: false,\n      unArchiveModal: false,\n    }\n    this.codeInputRef = null\n    this.nameInputRef = null\n    this.currentCourse = null\n  }\n\n  //get's the current course\n  currentCourseDetails = () => {\n    let code = \"\", name = \"\"\n    if (this.currentCourse !== null){\n      code = data[this.currentCourse].code || \"\"\n      name = data[this.currentCourse].name || \"\"\n    }\n    return {code, name}\n  }\n\n  // toggles the modals\n  toggleAdd = () => this.setState({addModal:!this.state.addModal})\n  toggleEdit = (key=null) => {\n    // if we're toggling false -> true, i.e. modal is opening\n    // set currentCourse to key, if it's closing, set to null\n    this.currentCourse = this.state.editModal? null : key\n    this.setState({editModal:!this.state.editModal})\n  }\n  toggleArchive = (key=null) => {\n    this.currentCourse = this.state.archiveModal? null : key\n    this.setState({archiveModal:!this.state.archiveModal})\n  }\n  toggleUnArchive = (key=null) => {\n    this.currentCourse = this.state.unArchiveModal? null : key\n    this.setState({unArchiveModal:!this.state.unArchiveModal})\n  }\n  toggleDelete = (key=null) => {\n    this.currentCourse = this.state.deleteModal? null : key\n    this.setState({deleteModal:!this.state.deleteModal})\n  }\n\n  // the modal contents for each of the four modals\n  addModalBody = () => (\n    <div>\n      <p className=\"label\">Course Code</p>\n      <Input  placeholder=\"Eg. 'CSE 170'\"\n              ref={input => this.codeInputRef = input}/>\n      <p className=\"label\">Course Title</p>\n      <Input  placeholder=\"Eg. 'Interaction Design'\"\n              ref={input => this.nameInputRef = input}/>\n    </div>\n  )\n  editModalBody = () => {\n    let {code = \"\", name = \"\"} = this.currentCourseDetails()\n    return (\n      <div>\n        <p className=\"label\">Course Code</p>\n        <Input  placeholder=\"Eg. 'CSE 170'\"\n                defaultValue={code}\n                ref={input => this.codeInputRef = input}/>\n        <p className=\"label\">Course Title</p>\n        <Input  placeholder=\"Eg. 'Interaction Design'\"\n                defaultValue={name}\n                ref={input => this.nameInputRef = input}/>\n      </div>\n    )\n  }\n  archiveModalBody = () => {\n    let {code = \"\", name = \"\"} = this.currentCourseDetails()\n    return (\n      <div className=\"archive-message\">\n        <p>Are you sure you want to archive</p>\n        <h2>{code}</h2>\n        <h3>{name}</h3>\n      </div>\n    )\n  }\n  unArchiveModalBody = () => {\n    let {code = \"\", name = \"\"} = this.currentCourseDetails()\n    return (\n      <div className=\"archive-message\">\n        <p>Are you sure you want to unarchive</p>\n        <h2>{code}</h2>\n        <h3>{name}</h3>\n      </div>\n    )\n  }\n  deleteModalBody = () => {\n    let {code = \"\", name = \"\"} = this.currentCourseDetails()\n    return (\n      <div className=\"error-message\">\n        <p>Are you sure you want to delete</p>\n        <h2>{code}</h2>\n        <h3>{name}</h3>\n        <span><b>Danger!</b> Once you've deleted the course you\n          cannot get it back, it is permanent.</span>\n      </div>\n    )\n  }\n\n  // All the actions - add new, edit, archive and delete\n  addCourse = () => {\n    let code = this.codeInputRef.state.value\n    let name = this.nameInputRef.state.value\n\n    let cid = \"cid\" + Date.now().toString()\n    data[cid] = {code, name, vcount:0, active:true}\n    this.toggleAdd()\n    message.success(<span>Course \"<b>{code}</b> : {name}\" successfully created!</span>)\n  }\n  editCourse = () => {\n    let code = this.codeInputRef.state.value\n    let name = this.nameInputRef.state.value\n\n    let cid = this.currentCourse\n    data[cid] = Object.assign(data[cid], {code, name})\n    this.toggleEdit()\n    message.success(<span>Course \"<b>{code}</b> : {name}\" successfully edited!</span>)\n  }\n  archiveCourse = () => {\n    let {code, name} = data[this.currentCourse]\n    data[this.currentCourse].active = false\n    this.toggleArchive()\n    message.success(<span>Course \"<b>{code}</b> : {name}\" successfully archived!</span>)\n  }\n  unArchiveCourse = () => {\n    let {code, name} = data[this.currentCourse]\n    data[this.currentCourse].active = true\n    this.toggleUnArchive()\n    message.success(<span>Course \"<b>{code}</b> : {name}\" successfully unarchived!</span>)\n  }\n  deleteCourse = () => {\n    let {code, name} = data[this.currentCourse]\n    delete data[this.currentCourse]\n    this.toggleDelete()\n    message.success(<span>Course \"<b>{code}</b> : {name}\" successfully deleted!</span>)\n  }\n\n  render(){\n    let objs = Object.keys(data)\n    let {addModal, editModal, archiveModal, deleteModal, unArchiveModal} = this.state\n    return (\n      <div className=\"courses-shell\">\n        <Nav onAddCourse={this.toggleAdd}/>\n        <div className=\"course-container\">\n        <Collapse defaultActiveKey={['1']} \n                  ghost \n                  expandIconPosition=\"right\" \n                  className=\"course-collapse more-specificity\">\n          <Panel header=\"Active\" key=\"1\">\n            { objs.filter(key => data[key].active)\n                  .map(key => <Course key={key} cid={key}\n                              onEdit={() => this.toggleEdit(key) }\n                              onArchive={() => this.toggleArchive(key)}\n                              onDelete={() => this.toggleDelete(key)} />\n                      )\n            }\n          </Panel>\n          <Panel header=\"Archived\" key=\"2\">\n            { objs.filter(key => !data[key].active)\n                  .map(key => <Course key={key} cid={key}\n                              onEdit={() => this.toggleEdit(key) }\n                              onUnArchive={() => this.toggleUnArchive(key)}\n                              onDelete={() => this.toggleDelete(key)} />\n                      )\n            }\n          </Panel>\n        </Collapse>\n        </div>\n        <Modal  title=\"Create course\"\n                visible={addModal}\n                okText=\"Create\"\n                onOk={this.addCourse}\n                onCancel={this.toggleAdd}\n                destroyOnClose\n                className=\"course-config-modal\"\n              >\n          {this.addModalBody()}\n        </Modal>\n        <Modal  title=\"Edit course\"\n                visible={editModal}\n                okText=\"Update\"\n                cancelText=\"Discard changes\"\n                onOk={this.editCourse}\n                onCancel={this.toggleEdit}\n                destroyOnClose\n                className=\"course-config-modal\"\n              >\n          {this.editModalBody()}\n        </Modal>\n        <Modal  title={<span className=\"title\"><WarningFilled className=\"arch-icon\"/> Archive course</span>}\n                visible={archiveModal}\n                okText=\"Archive\"\n                okType=\"danger\"\n                onOk={this.archiveCourse}\n                onCancel={this.toggleArchive}\n                destroyOnClose\n                className=\"course-config-modal\"\n              >\n          {this.archiveModalBody()}\n        </Modal>\n        <Modal  title={<span className=\"title\">Unarchive course</span>}\n                visible={unArchiveModal}\n                okText=\"Unarchive\"\n                okType=\"primary\"\n                onOk={this.unArchiveCourse}\n                onCancel={this.toggleUnArchive}\n                destroyOnClose\n                className=\"course-config-modal\"\n              >\n          {this.unArchiveModalBody()}\n        </Modal>\n        <Modal  title={<span className=\"title\"><WarningFilled className=\"delt-icon\"/> Delete course</span>}\n                visible={deleteModal}\n                okText=\"Delete the course\"\n                cancelText=\"No, go back\"\n                onOk={this.deleteCourse}\n                okType=\"danger\"\n                onCancel={this.toggleDelete}\n                cancelButtonProps={{type:\"primary\"}}\n                destroyOnClose\n                className=\"course-config-modal\"\n              >\n          {this.deleteModalBody()}\n        </Modal>\n      </div>\n    )\n  }\n}\n\nfunction Nav({onAddCourse}){\n  let history = useHistory()\n  const goToHome = () => {\n    history.push(`/`)\n  }\n  return (\n    <nav className=\"all-courses-nav\">\n      <Logo style={{height: \"36px\", width:\"36px\", padding:\"3px\"}} onClick={goToHome}/>\n      <p>COURSES</p>\n      <PlusOutlined onClick={onAddCourse}/>\n    </nav>\n    )\n}\n\n// the card ui for a single course\nfunction Course(props){\n  const {name, code, vcount} = data[props.cid]\n  const {onEdit, onArchive, onDelete, onUnArchive} = props\n\n  let history = useHistory()\n  const goToCourse = () => {\n    history.push(`/notes/${props.cid}`)\n  }\n\n  const menu = courseCardMenu({onEdit, onArchive, onDelete, onUnArchive})\n\n  return(\n    <div className=\"course-card\" onClick={goToCourse}>\n      <div className=\"course-card-header\">\n        <h2 className=\"course-code\">{code}</h2>\n        <Dropdown \n            overlay={menu}\n            trigger={['click']}\n            placement=\"bottomRight\" \n            overlayClassName=\"course-card-edit\"\n        >\n          <SettingFilled onClick={e => e.stopPropagation()} />\n        </Dropdown>\n      </div>\n      <p  className=\"course-name\">{name}</p>\n      <p  className=\"course-vcount\">{vcount} videos</p>\n    </div>\n  )\n}\n\nconst courseCardMenu = ({onEdit, onArchive, onDelete, onUnArchive}) => (\n  <Menu onClick={(e) => e.domEvent.stopPropagation()}>\n    <Menu.Item onClick={onEdit}>\n      Edit Course\n    </Menu.Item>\n    <Menu.Divider />\n    {onArchive? \n        (<Menu.Item onClick={onArchive}>\n          Archive Course\n        </Menu.Item>) \n    :   (<Menu.Item onClick={onUnArchive}>\n          Unarchive Course\n        </Menu.Item>)}\n    <Menu.Divider />\n    <Menu.Item danger onClick={onDelete}>\n       Delete Course\n    </Menu.Item>\n  </Menu>\n)","export function randstr(){\n    return Math.random().toString(36).replace('0.','')\n}\n\nexport function isEmpty(obj){\n    return obj && Object.keys(obj).length === 0 && obj.constructor === Object\n}\n\n//takes in time in ms, returns rounded up in min\nexport function msToMins(ms) {\n  return Math.round(ms/(1000*60))\n}\n\n//takes in seconds, returns hh:mm:ss\nexport function secToStr(sec){\n  let hr = Math.floor(sec / (60*60))\n  sec = sec % (60*60)\n  let min = Math.floor(sec / 60)\n  sec = sec % 60\n\n  let hs = hr > 0 ? hr.toString().padStart(2, '0')+\":\" : \"\"\n  let ms = min.toString().padStart(2,0)+\":\"\n  let ss = sec.toString().padStart(2,0)\n  return `${hs}${ms}${ss}`\n}\n\n//takes in hh:mm:ss, returns total seconds\nexport function strToSec(str){\n  let time = str.split(\":\").map(e => parseInt(e))\n  let sec = time.length == 3? time[0]*3600 + time[1]*60 + time[2] : time[0]*60 + time[1]\n  return sec\n}\n\nexport async function getYTDetails(video_id) {\n  const decodeQueryString = (queryString) => {\n    let key, keyValPair, keyValPairs, r, val, _i, _len\n    r = {}\n    keyValPairs = queryString.split(\"&\");\n    for (_i = 0, _len = keyValPairs.length; _i < _len; _i++) {\n      keyValPair = keyValPairs[_i];\n      key = decodeURIComponent(keyValPair.split(\"=\")[0]);\n      val = decodeURIComponent(keyValPair.split(\"=\")[1] || \"\")\n      if (key == \"url\") {\n        let urlParams = new URLSearchParams(val)\n        let lsig = urlParams.get('lsig')\n        r.lsig = lsig\n      }\n      r[key] = val\n    }\n    return r\n  }\n\n  const decodeStreamMap = (player_response) => {\n    let quality, type, _i, _len, _ref\n    let sources = {}\n    _ref = player_response.streamingData.formats\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n      let stream = _ref[_i]\n      type = stream.mimeType.split(\";\")[0]\n      quality = stream.quality\n      stream.original_url = stream.url\n      sources[\"\" + type + \" \" + quality] = stream\n    }\n    return sources\n  }\n\n  const getSource = (video, type, quality) => {\n    let exact, key, lowest, source, _ref;\n    lowest = null;\n    exact = null;\n    _ref = video.sources;\n    for (key in _ref) {\n      source = _ref[key];\n      if (source.mimeType.includes(type)) {\n        if (source.quality.match(quality)) {\n          exact = source;\n        } else {\n          lowest = source;\n        }\n      }\n    }\n    return exact || lowest;\n  }\n\n  const response = await fetch(`https://at8u8s124e.execute-api.eu-west-1.amazonaws.com/prod?video_id=${video_id}`,\n                    {headers: { 'Content-Type' : 'text/plain'}})\n  const video_info = await response.text()\n  let video = decodeQueryString(video_info);\n  if (video.status === 'fail') {\n    console.error(\"ERROR, failed to get video details\")\n    return video\n  }\n  console.log(\"video\", video)\n  let res = JSON.parse(video.player_response)\n  video.sources = decodeStreamMap(res)\n  let source = getSource(video, \"video/mp4\", \"hd720\")\n  let title = res.videoDetails.title.split(\"+\").join(\" \")\n  let thumbnail = res.videoDetails.thumbnail.thumbnails[3] ||\n                  res.videoDetails.thumbnail.thumbnails[0]\n  return {  ...source, title, thumbnail: thumbnail.url }\n\n  /* SAMPLE RESULTS returned\n  {\n    \"itag\": 22,\n    \"url\": \"https://r1---sn-q0cedn7s.googlevideo.com...\",\n    \"mimeType\": \"video/mp4;+codecs=\\\"avc1.64001F,+mp4a.40.2\\\"\",\n    \"bitrate\": 700788,\n    \"width\": 1280,\n    \"height\": 720,\n    \"lastModified\": \"1609999185256509\",\n    \"quality\": \"hd720\",\n    \"fps\": 24,\n    \"qualityLabel\": \"720p\",\n    \"projectionType\": \"RECTANGULAR\",\n    \"audioQuality\": \"AUDIO_QUALITY_MEDIUM\",\n    \"approxDurationMs\": \"162887\",\n    \"audioSampleRate\": \"44100\",\n    \"audioChannels\": 2,\n    \"original_url\": \"https://r1---sn-q0cedn7s.googlevideo.com/...\",\n    \"title\": \"\",\n    \"thumbnail\": \"imgurl.com\"\n  }\n  */\n}\n\n//https://github.com/gurumukhi/youtube-screenshot\nexport function captureScreenshot() {\n    let canvas = document.createElement(\"canvas\")\n    let video = document.querySelector(\"#vid\")\n    let ctx = canvas.getContext(\"2d\")\n    canvas.width = parseInt(video.offsetWidth)\n    canvas.height = parseInt(video.offsetHeight)\n    ctx.drawImage(video, 0, 0, canvas.width, canvas.height)\n    return canvas.toDataURL()\n}\n","import React from \"react\"\nimport Logo from \"./components/Logo\"\nimport { Select, Collapse, Menu, Dropdown, Modal } from \"antd\"\nimport { SearchOutlined, SettingFilled } from '@ant-design/icons'\nimport { withRouter, useHistory } from \"react-router-dom\"\nimport { secToStr } from \"./utils\"\nimport data from \"./data\"\nimport \"./AllVideos.css\"\n\n\nconst { Panel } = Collapse;\nfunction filterNotesByTags(notes, tags){\n  return notes.filter(note => tags.some(tag => note.tags.includes(tag)))\n}\n\nclass AllVideos extends React.Component {\n  constructor(props){\n    super(props)\n    this.filterTags = [] // this is to keep track of as select changes\n\n    let q = this.props.location.search || \"\"\n    let params = new URLSearchParams(q)\n    let tags = params.getAll(\"tags\")\n    if(tags.length > 0){\n      this.filterTags= tags\n    }\n    //we don't apply filter when filter dropdown is open\n    this.filterOpen = false\n\n    this.state = {\n      filterTags: this.filterTags,\n    }\n  }\n\n  goToHome = () => this.props.history.push(\"/\")\n  getCid = () => this.props.match.params[\"courseId\"]\n  getTagsOpts = () => {\n    let cid = this.getCid()\n    let videos = data[cid].videos\n    let tagOptions = []\n    let tags = {}\n    videos.map(video =>\n      video.notes.map(note =>\n        note.tags.map(tag => tags[tag] = true)\n      )\n    )\n    Object.keys(tags).map(tag => tagOptions.push({label:tag, value:tag}))\n    return tagOptions\n  }\n\n  // we only want to apply the values once the user is done selecting,\n  // hence cache in this.filterTags, and update state when necessary.\n  updateFilter = () => {\n    const {history, location} = this.props\n    this.setState({filterTags:this.filterTags})\n    let params = new URLSearchParams(\"\")\n    this.filterTags.forEach(tag => params.append(\"tags\", tag))\n    history.replace(`${location.pathname}?${params}`)\n  }\n\n  onVideoDeleted = (vid) => {\n    const cid = this.getCid()\n    data[cid].videos = data[cid].videos.filter(video => video.id != vid)\n    this.forceUpdate()\n  }\n\n  getNav = () => {\n    const options = this.getTagsOpts()\n    return (\n    <nav className=\"all-videos-nav\">\n      <Logo style={{height: \"36px\", width:\"36px\", padding:\"3px\"}} onClick={this.goToHome}/>\n      <Select \n        mode=\"tags\" \n        className=\"filter-tags\"\n        placeholder=\"Search by tags\"\n        showSearch={true}\n        allowClear\n        defaultValue={this.filterTags}\n        options={options}\n        onDropdownVisibleChange={(open) => {\n          this.filterOpen = open\n          if(!open) //dropdown just closed\n            this.updateFilter()\n        }}\n        onChange={tags => {\n          this.filterTags = tags\n          if(!this.filterOpen) //change without open dropdown\n            this.updateFilter() //update immediately\n        }}\n      >\n      </Select>\n      <SearchOutlined style={{fontSize: \"22px\"}}/>\n    </nav>\n  )}\n\n  getSearchResults = (videos, tags) => {\n    // filter the videos so that at a video has at least one matching note\n    videos = videos.map(video => ({...video, notes:filterNotesByTags(video.notes, tags)}))\n                   .filter(video => video.notes.length > 0)\n    let vids = videos.map(video => video.id)\n\n    return (\n    <>\n      <div className=\"search-results\">\n        You are currently searching for &nbsp;\n        {tags.map(s => <span className=\"s-tag\" key={s}>{s}</span>)}\n      </div>\n      <Collapse\n        ghost\n        defaultActiveKey={vids}\n        expandIconPosition=\"right\"\n        className=\"video-search-collapse\"\n      >\n        {\n          videos.map(video => (\n            <Panel key={video.id} header={video.title}>\n              { video.notes.map(note => \n                  <Note key={note.id} data={note} vid={video.id}/>\n              )}\n            </Panel>\n            )\n          )\n        }\n      </Collapse>\n    </>\n    )\n  }\n\n  render(){\n    let cid = this.props.match.params[\"courseId\"]\n    const {filterTags} = this.state\n    const course = data[cid]\n    const videos = course.videos\n    return (\n      <div className=\"videos-shell\">\n        {this.getNav()}\n        <div className=\"video-container\">\n          <h2 className=\"course-title\">{course.code}: {course.name}</h2>\n          {filterTags.length? this.getSearchResults(videos, filterTags)\n            : videos.map(video => <Video \n                                      key={video.id}\n                                      video={video}\n                                      onDeleted={() => this.onVideoDeleted(video.id)}\n                                  />)}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default withRouter(AllVideos)\n\n\n// the card ui for a single video lecture\nfunction Video(props){\n  let video = props.video\n  const {id, title, length, image, notes} = video\n  const ncount = notes.length\n\n  let history = useHistory()\n  const goToCourse = () => {\n    history.push(`/video/${id}`)\n  }\n\n  const onDeleteing = () => {\n    let content = `You have ${notes.length} notes and will lose all of them.\n    This action is irreversible!`\n    Modal.confirm({\n      title:\"Are you sure you want to delete this lecture?\",\n      content: content,\n      okText:\"Delete\",\n      cancelText:\"No, keep\",\n      okType:\"danger\",\n      onOk:props.onDeleted\n    })\n  }\n\n  const getEditMenu = () => (\n    <Menu onClick={(e) => e.domEvent.stopPropagation()}>\n      <Menu.Item danger onClick={onDeleteing}>\n        Delete Lecture\n      </Menu.Item>\n    </Menu>\n  )\n\n  let h = Math.floor(length / 60)\n  let m = length % 60\n  const time = h > 0? `${h} hours ${m} min` : `${m} min`\n\n  return(\n    <div className=\"video-card\" onClick={goToCourse}>\n      <div className=\"video-card-header\">\n        <h2 className=\"video-title\">{title}</h2>\n        <Dropdown \n          overlay={getEditMenu()}\n          trigger={['click']}\n          placement=\"bottomRight\" \n          overlayClassName=\"video-card-edit\"\n        >\n          <SettingFilled onClick={e => e.stopPropagation()} />\n        </Dropdown>\n      </div>\n      {/* should the card also hold some description? user defined? taken from youtube? */}\n      <p  className=\"video-details\">{ncount} Notes <b>·</b> {time}</p>\n      <img src={image} className=\"thumbnail\" alt={`Thumbnail for ${title}`}/>\n    </div>\n  )\n}\n\n\n/*\nNOTE : CSS is a part of VideoNotes.css\n*/\nfunction Note(props) {\n  let history = useHistory()\n  const onTimestamp = (sec) => {\n    // should do a history.push(/video/vid?t=sec)\n    history.push(`/video/${props.vid}?t=${sec}`)\n  }\n  const {tags, timestamp, content=\"\"} = props.data\n  return (\n    <div className=\"note-item\">\n        <div className=\"note-top\">\n          <div className=\"note-ts\" onClick={()=>onTimestamp(timestamp)}>{secToStr(timestamp)}</div>\n        </div>\n        <div className=\"note-content\">\n          {content}\n        </div>\n        <div className=\"note-tags\">\n          {tags.map(tag => <div className=\"note-tag\" key={tag}>#{tag}</div>)}\n        </div>\n    </div>\n  )\n}","import React from \"react\"\nimport { withRouter, Prompt } from \"react-router-dom\"\nimport { Spin, Skeleton, Dropdown, Modal, Select,\n         Menu, message, TimePicker, Button, Input } from \"antd\"\nimport { SearchOutlined, SettingFilled, PlusOutlined, PushpinOutlined,\n         PushpinFilled, EditOutlined } from '@ant-design/icons'\nimport moment from 'moment'\n\nimport Logo from \"./components/Logo\"\nimport { getYTDetails, isEmpty, msToMins, secToStr, strToSec, randstr } from \"./utils\"\nimport data from \"./data\"\n\nimport \"./VideoNotes.css\"\nconst { TextArea } = Input\n\n/* LOGIC + Dataflow\n  CURRENT : We have two different scenarios -\n    1. Lecture Exists\n      - VNotes makes the request for video details. Once it processes\n          the return val, it hands over the 'url' to VPlayer.\n      - The Vplayer shows a loading screen until it has props.url\n      - The VNotes shows it's own loading for the title+class, and notes\n          section on intial render, then in ComponentDidMount it fetches\n          the data from local storage\n    2. Additionally for New Lectures\n      - Title and class are defaulted to \"Title\" and \"unclassified\"\n      - The video object is created only on the first edit, viz on\n          change of title, change of name or New note\n      - The ID used is the same as the youtube video id of the url\n      - During creation, 'length' for the Lecture is got as a part of\n          the api request VNotes made earlier (to get the url).\n\n  FINAL : later on if we have time\n    1. Have our own backend (firebase function) which gets the url\n        This will give us title, thumbnail and description?\n    2. Reconsider auto-create for new videos\n\n  There were a bunch of other considerations -\n    1. Should 'id' be the same as youtube's video id? (currently : YES)\n        After a lot of deleberation, yes, since otherwise you'd have to\n        check for existance & generate a new uri at <Home/> and then also\n        figure out a way for it to communicate the url id to <VideoNotes/>.\n        Or you need to go to '/new' and then move to '/id' on save.\n        Finally decided to have id = youtube id. Nothing to lose.\n    2. Auto Create for new videos? (currently : NO)\n        This is tricky as I need the length as a part of the {video} details.\n        Creation should be done in ComponentDidMount, but I don't have the\n        length. I guess I could create it after I get the request, but I'll\n        think about it later.\n*/\n\nfunction getVideoDetails(vid){\n  let cid, video, found = false\n  for(cid in data){\n    video = data[cid].videos.find(video => video.id === vid)\n    if (video) {\n      found = true\n      break\n    }\n  }\n  return found? video : {}\n}\n\nfunction getVideoCourse(vid){\n  let cid, video, found = false\n  for(cid in data){\n    video = data[cid].videos.find(video => video.id === vid)\n    if (video) {\n      found = true\n      break\n    }\n  }\n  if (found){\n    return {cid, ...data[cid]}\n  }\n  return {cid:\"unclassified\"}\n}\n\n// create a new video and adds it to data\nfunction createVideoEntry(cid, lectureDetails){\n  // were pushing the lecture directly, any changes\n  // we make to it should also reflect on 'data'\n  data[cid].videos.push(lectureDetails)\n}\n\n// get's all the courses in options format\nfunction getCourseOpts(){\n  const cids = Object.keys(data)\n  let opts = []\n  for(let cid of cids){\n    let label = `${data[cid].code} : ${data[cid].name}`\n    opts.push({value:cid, label:label})\n  }\n  return opts\n}\n\n// get's all the unique tags for a course in options format\nfunction getTagsOpts(cid) {\n  let videos = data[cid].videos\n  let tagOptions = []\n  let tags = {}\n  videos.map(video =>\n    video.notes.map(note =>\n      note.tags.map(tag => tags[tag] = true)\n    )\n  )\n  Object.keys(tags).map(tag => tagOptions.push({label:tag, value:tag}))\n  return tagOptions\n}\n\n// replace the entry in data[cid].videos array where video.id = vid\nfunction editVideoDetails(videoDetails){\n  let course = getVideoCourse(videoDetails.id)\n  let uIndex = course.videos.findIndex((video) => video.id == videoDetails.id)\n  course.videos[uIndex] = videoDetails\n}\n\n// checks if note has at least one tag of tags\nfunction noteHasTag(note, tags){\n  return tags.some(tag => note.tags.includes(tag))\n}\n\nclass VideoNotes extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      ytDetails: {}, //remote data - url\n      lectureDetails: {}, //data[cid].videos[vid]\n      editingNote: null, //nid of note being edited\n      newNote: false, //whether we're editing a newly create note (just after '+')\n      editingLecture: false, //whether I'm editing title & class of lecture\n      search:[],\n      pinned: true // is the video pinned?\n    }\n    this.tempEdits = {} //temp data to hold title & class edit details\n    this.filterTags = []\n    this.filterOpen = false\n  }\n\n  goToHome = () => this.props.history.push(\"/\")\n\n  getVideoId = () => this.props.match.params[\"videoId\"]\n\n  getNav = () => {\n    let {cid} = getVideoCourse(this.getVideoId())\n    let options = getTagsOpts(cid)\n    return (\n    <nav className=\"notes-nav\">\n      <Logo style={{height: \"36px\", width:\"36px\", padding:\"3px\"}} onClick={this.goToHome}/>\n      <div className=\"filter-select\">\n        <Select \n          mode=\"tags\"\n          className=\"filter-tags specificiy\"\n          placeholder=\"Search by tags\"\n          showSearch={true}\n          allowClear\n          options={options}\n          onDropdownVisibleChange={(open) => {\n            this.filterOpen = open\n            if(!open) this.updateFilter()\n          }}\n          onChange={(tags) => {\n            this.filterTags = tags\n            if(!this.filterOpen) this.updateFilter()\n          }}\n        >\n        </Select>\n        <SearchOutlined style={{fontSize: \"22px\"}}/>\n      </div>\n    </nav>\n  )}\n\n  updateFilter = () => {\n    this.setState({search:this.filterTags})\n  }\n\n  componentDidMount() {\n    const vid = this.getVideoId()\n    // get the details\n    let lecture = getVideoDetails(vid)\n\n    // get the media details\n    getYTDetails(vid).then(data => {\n      if(isEmpty(lecture)){\n        // create a lecture entry with defaults\n        let length = msToMins(parseInt(data[\"approxDurationMs\"]) || 0)\n        lecture = {id:vid, title:data.title, notes:[], image:data.thumbnail, length}\n        createVideoEntry(\"unclassified\", lecture)\n      }\n      this.setState({ytDetails:data, lectureDetails:lecture})\n    })\n  }\n\n  onNoteEditing = (nid) => {\n    this.setState({editingNote: nid})\n  }\n\n  onNoteEdited = (update, uNote) => {\n    if(update){\n      let notes = this.state.lectureDetails.notes\n      let i = notes.findIndex(note => note.id === uNote.id)\n      notes[i] = uNote\n      notes.sort((n1, n2) => n1.timestamp - n2.timestamp)\n      /* bad practice ¯\\_(ツ)_/¯\n      // I should actually update lectureDetails, but this works?\n      // I'm actually supposed to do what I did in \"onNoteDeleted\"\n        uNotes = [...notes]\n        uLecture = {...lecture, notes:uNotes}\n        editVideoDetails(newLecture)\n        this.setState({lectureDetails: newLecture})\n       */\n    }\n    this.setState({editingNote:null, newNote:false})\n    if (update)\n      message.success(`Note \"${secToStr(uNote.timestamp)}\" successfully edited!`)\n  }\n\n  onNoteDeleted = (nid) => {\n    let lecture = this.state.lectureDetails\n    let notes = lecture.notes.filter(note => note.id !== nid)\n    let newLecture = {...lecture, notes:notes}\n    editVideoDetails(newLecture)\n    this.setState({lectureDetails: newLecture, newNote:false, editingNote:null})\n    message.success(\"Note successfully deleted!\")\n  }\n\n  onNoteAdded = () => {\n    let id = \"nid-\" + randstr()\n    let timestamp = Math.round(document.querySelector(\"#vid\").currentTime)\n    let newNote = {id, timestamp, content:\"\", tags:[]}\n    let notes = this.state.lectureDetails.notes\n    notes.push(newNote)\n    notes.sort((n1, n2) => n1.timestamp - n2.timestamp)\n    this.setState({editingNote:id, pinned:false, newNote:true})\n    document.querySelector(\"#vid\").pause()\n  }\n\n  updateTitleClass = () => {\n    // update the title or class\n    let oldCid = getVideoCourse(this.getVideoId()).cid\n    let newCid = this.tempEdits.class\n    if(newCid && (newCid!== oldCid)){\n      // remove video from old cid\n      data[oldCid].videos = data[oldCid].videos.filter(v => \n                                              v.id !== this.getVideoId())\n\n      // move it into new cid\n      data[newCid].videos.unshift(this.state.lectureDetails)\n    }\n    if(this.tempEdits.title)\n      // bad practice ¯\\_(ツ)_/¯\n      // should setState + update data with new obj\n      this.state.lectureDetails.title = this.tempEdits.title\n\n    this.setState({editingLecture:false})\n    this.tempEdits = {}\n  }\n\n  getTitleModal = () => {\n    let opts = getCourseOpts()\n    let {cid} = getVideoCourse(this.getVideoId())\n\n    return (\n      <Modal \n        title=\"Edit lecture details\"\n        visible={this.state.editingLecture}\n        okText=\"Update\"\n        cancelText=\"Discard changes\"\n        onCancel={() => {\n          this.setState({editingLecture:false})\n          this.tempEdits = {}\n        }}\n        onOk={this.updateTitleClass}\n        destroyOnClose\n        className=\"lecture-edit-modal\"\n      >\n        <div className=\"lecture-edit-body\">\n          <p className=\"label\">Title</p>\n          <Input  placeholder=\"Lecture Title\"\n                  className=\"title-input\"\n                  defaultValue={this.state.lectureDetails.title}\n                  onChange={(e) => this.tempEdits.title = e.target.value}/>\n          <p className=\"label\">Course</p>\n          <Select\n            defaultValue={cid}\n            options={opts}\n            onChange={(cid) => this.tempEdits.class = cid}>\n          </Select>\n        </div>\n      </Modal>\n    )\n  }\n\n  getLoadingDOM = () => <Skeleton active/>\n\n  render(){\n    let { lectureDetails, ytDetails:{url}, editingLecture,\n          editingNote, pinned, search, newNote } = this.state\n    const vid = this.getVideoId()\n    const loading = isEmpty(lectureDetails)\n    let course = getVideoCourse(vid)\n    let notes = lectureDetails.notes\n    if(search.length>0)\n      notes = notes.filter(note => noteHasTag(note,search))\n\n    // if a note is bring edited or if search is active, can't edit\n    const editable = (editingNote || search.length > 0) ? false : true\n    return (\n      <div className=\"notes-shell\">\n        {this.getNav()}\n        <VideoPlayer url={url} pinned={pinned}/>\n        {loading? this.getLoadingDOM() :\n        (<>\n        <div className=\"notes-content-wrapper\">\n          <div className=\"lecture-details\">\n            <div>\n              <h2 className=\"lecture-title\">{lectureDetails.title}</h2>\n              <span className=\"lecture-course\">{course.code} <b>·</b> {course.name}</span>\n            </div>\n            <EditOutlined \n              style={{fontSize:\"20px\", padding:\"0 10px\", cursor:\"pointer\"}}\n              onClick={() => this.setState({editingLecture: true, tempEdits: {}})}\n            />\n            {this.getTitleModal()}\n          </div>\n          <Prompt\n            when={(editingNote || editingLecture)?true:false}\n            message={_ => \"You have unsaved edits! Are you sure you want to move away?\"}\n          />\n          {\n            search.length > 0? <div className=\"search-results\">You are currently searching for &nbsp;\n                    {search.map(s => <span className=\"s-tag\" key={s}>{s}</span>)}\n                <br/>\n                <span style={{color:\"gray\"}}>To edit or create new notes, please clear the search.</span>\n            </div> \n            : null\n          }\n          <div className=\"notes-container\">\n            {notes.map(note => (\n                  <Note\n                    key={note.id}\n                    data={note}\n                    vid={vid}\n                    editMode={editingNote == note.id}\n                    editable={editable}\n                    newNote={newNote}\n                    onEditing={() => this.onNoteEditing(note.id)}\n                    onDeleted={() => this.onNoteDeleted(note.id)}\n                    onEdited={this.onNoteEdited}\n                  />)\n            )}\n          </div>\n        </div>\n        <div className=\"notes-footer\">\n          <div className=\"left-side\">\n          {editable? <PlusOutlined onClick={this.onNoteAdded} style={{marginRight:\"18px\"}}/> : null}\n          </div>\n          <div className=\"right-side\">\n          { pinned? <PushpinFilled onClick={() => this.setState({pinned:false})}/> :\n                    <PushpinOutlined onClick={() => this.setState({pinned:true})}/> }\n          </div>\n        </div>\n        </>)}\n      </div>\n    )\n  }\n}\n\nexport default withRouter(VideoNotes)\n\n\nclass Note extends React.Component {\n  constructor(props){\n    super(props)\n    this.editData = {} //props.data being edited\n    this.note = React.createRef()\n  }\n\n  componentDidUpdate(oProps){\n    if(oProps.editMode != this.props.editMode)\n      this.note.current.scrollIntoView({behavior:\"smooth\", block:\"center\"})\n  }\n\n  componentDidMount(){\n    if(this.props.editMode == true)\n      this.note.current.scrollIntoView({behavior:\"smooth\", block:\"center\"})\n  }\n\n  onTimestamp = (sec) => {\n    // bad practice ¯\\_(ツ)_/¯\n    document.querySelector(\"#vid\").currentTime = sec\n  }\n\n  onEditing = () => {\n    this.props.onEditing()\n  }\n  onDeleteing = () => {\n    Modal.confirm({\n      title:\"Are you sure you want to delete this note?\",\n      okText:\"Delete\",\n      cancelText:\"No, keep\",\n      okType:\"danger\",\n      onOk:this.props.onDeleted\n    })\n  }\n\n  // on edit: tell parent note 'id' is under edit, parent will update state => props.\n  // on edit complete: tell parent {nid: new data}, parent will update state => props.\n  // on delete complete : ask parent to delete note. parent will update state => props.\n  getEditMenu = () => (\n    <Menu onClick={(e) => e.domEvent.stopPropagation()}>\n      <Menu.Item onClick={this.props.onEditing}>\n        Edit Note\n      </Menu.Item>\n      <Menu.Divider />\n      <Menu.Item danger onClick={this.onDeleteing}>\n        Delete Note\n      </Menu.Item>\n    </Menu>\n  )\n\n  onDone = (update) => {\n    if(update){\n      let newNote = {...this.props.data, ...this.editData}\n      this.props.onEdited(update, newNote)\n    }\n    else if(this.props.newNote) {\n      // if this is a new note and you're \"discarding\" it,\n      // just delete it.\n      this.props.onDeleted()\n    }\n    else{\n      this.props.onEdited(update, null)\n    }\n    this.editData = {}\n  }\n\n  timeUpdated = (_, timeStr) => this.editData.timestamp = strToSec(timeStr)\n  contentUpdated = (e) => this.editData.content = e.target.value\n\n  getEditBody = () => {\n    let {timestamp, content, tags} = this.props.data\n    const isNew = this.props.newNote\n    \n    // get moment object for default HH:mm:ss - tricky to deal with the formats\n    let timeFormat = timestamp >= 3600 ? \"hh:mm:ss\" : \"mm:ss\"\n    let defaultTime = moment(secToStr(timestamp), timeFormat)\n    // save and discard button\n    let buttons = (\n            <div>\n              <Button danger onClick={()=>this.onDone(false)} style={{marginRight: \"10px\"}}>\n                Discard\n              </Button>\n              <Button type=\"primary\" onClick={()=>this.onDone(true)}>\n                {isNew? \"Create\": \"Save\" }\n              </Button>\n            </div>\n    )\n\n    let {cid} = getVideoCourse(this.props.vid)\n    let options = getTagsOpts(cid)\n\n    return (\n    <>\n      <div className=\"note-top-edit\">\n        <TimePicker defaultValue={defaultTime} format={timeFormat} \n                    showNow={false} onChange={this.timeUpdated} \n        />\n        {buttons}\n      </div>\n      <div className=\"note-content-edit\">\n        <TextArea rows={3} defaultValue={content?content:\"\"} onChange={this.contentUpdated}/>\n      </div>\n      <div className=\"note-tags-edit\">\n        <Select \n          mode=\"tags\" \n          className=\"edit-tags\"\n          placeholder=\"add tags\"\n          showSearch={true}\n          options={options}\n          defaultValue={tags}\n          onChange={(tags) => this.editData.tags = tags}\n        >\n        </Select>\n        <PlusOutlined />\n      </div>\n    </>\n    )\n  }\n\n  render(){\n    // editMode => is this note being edited, show the edit interface\n    // editable => if any other note is being edited don't show edit icon\n    const {editMode, editable} = this.props\n    const {tags, timestamp, content=\"\"} = this.props.data\n\n    return (\n      <div className=\"note-item\" ref={this.note}>\n        {editMode? this.getEditBody() :\n        (<>\n          <div className=\"note-top\">\n            <div className=\"note-ts\" onClick={()=>this.onTimestamp(timestamp)}>{secToStr(timestamp)}</div>\n            <div className=\"note-edit\" style={editable? {}: {display:\"none\"}}>\n              <Dropdown \n                overlay={this.getEditMenu()}\n                trigger={['click']}\n                placement=\"bottomRight\" \n                overlayClassName=\"note-item-edit\"\n              >\n                <SettingFilled onClick={e => e.stopPropagation()} />\n              </Dropdown>\n            </div>\n          </div>\n          <div className=\"note-content\">\n            {content}\n          </div>\n          <div className=\"note-tags\">\n            {tags.map(tag => <div className=\"note-tag\" key={tag}>#{tag}</div>)}\n          </div>\n        </>)\n        }\n      </div>\n    )\n  }\n\n}\n\nclass VideoPlayer extends React.Component{\n  constructor(props){\n    super(props)\n    this.player = React.createRef()\n    this.state = {video:null, width:null}\n  }\n\n  componentWillUnmount(){\n    delete this.observer\n  }\n\n  getTime(){\n    //return current time\n  }\n  getLength(){\n\n  }\n  seek(){\n  }\n  play(status){\n    // status=true => play; else pause\n  }\n\n  componentDidMount() {\n    // set up the observable\n    this.observer = new ResizeObserver(() => {\n      let el = this.player.current\n      if(el && (el.offsetWidth != this.state.width)){\n        this.setState({width: this.player.current.offsetWidth})\n      }\n    })\n    this.observer.observe(this.player.current)\n\n    // setState the current width\n    this.setState({\n        width: this.player.current?.offsetWidth\n    })\n  }\n\n  getVideoDOM = () => {\n    let params = new URLSearchParams(window.location.search)\n    let time = 0\n    if (params.get('t') != null) time = parseInt(params.get('t'))\n    const src = this.props.url || \"\"\n    const height = `${this.state.width * (9/16)}px`\n    return <video id='vid' autoPlay controls src={`${src}#t=${time}`} style={{height}} />\n  }\n\n  getLoadingDOM = () => {\n    return <Spin tip=\"Loading...\"/>\n  }\n\n  render(){\n    const { width } = this.state\n    const { url, pinned } = this.props\n    const content = url? this.getVideoDOM() : this.getLoadingDOM()\n    const height = `${this.state.width * (9/16)}px`\n    const rootClass = pinned? \"video-player pinned\" : \"video-player\"\n    return (\n      <div className={rootClass} ref={this.player} >\n       { width && \n        <div className=\"video-container\" style={{height}}>\n          {content}\n        </div>\n      }\n      </div>\n    )\n  }\n}\n\n","import React from \"react\";\nimport {\n  BrowserRouter as Router,\n  useRouteMatch,\n  useParams,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\n\nimport Home from \"./Home\"\nimport AllCourses from \"./AllCourses\"\nimport AllVideos from \"./AllVideos\"\nimport VideoNotes from \"./VideoNotes\"\nimport \"./App.css\"\n\nexport default function App() {\n  return (\n    <Router>\n      <div className=\"app-shell\">\n\n        <Switch>\n          {/* Shows the homescreen - user moves to notes or video */}\n          <Route exact path=\"/\">\n            <Home />\n          </Route>\n\n          {/* Shows the list of courses the user has taken notes for */}\n          <Route exact path=\"/notes\">\n            <AllCourses />\n          </Route>\n\n          {/* Shows the list of videos in the course 'courseId' */}\n          <Route exact path=\"/notes/:courseId\">\n            <AllVideos />\n          </Route>\n\n          {/* Shows the notes of the specific video selected */}\n          <Route path=\"/notes/:courseId/:videoId\">\n            <CourseNotes />\n          </Route>\n\n          {/* Shows the note taking view for the video */}\n          <Route path=\"/video/:videoId\">\n            <VideoNotes />\n          </Route>\n\n          {/* We can have a user manual sort of thing here? */}\n          <Route path=\"/about\">\n            <About />\n          </Route>\n\n          {/* 404 not found */}\n          <Route path=\"*\">\n            <NoMatch />\n          </Route>\n\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\n// function Home() {\n//   return (\n//     <>\n//     <div>Welcome to the app</div>\n//     <ul>\n//       <li><Link to=\"/notes\">View your notes</Link></li>\n//       <li><Link to=\"/video/newId\">Take new notes</Link></li>\n//     </ul>\n//     </>\n//   )\n// }\n\nfunction About() {\n  return <h2>About</h2>\n}\n\nfunction NoMatch() {\n  return <h2>404</h2>\n}\n\n// URL = '/notes'\n// function AllCourses() {\n//   let { url } = useRouteMatch()\n//   return (\n//     <>\n//     <div>List of courses</div>\n//     <ul>\n//       <li><Link to={`${url}/c1`}>Course 1</Link></li>\n//       <li><Link to={`${url}/c2`}>Course 2</Link></li>\n//       <li><Link to={`${url}/c3`}>Course 3</Link></li>\n//     </ul>\n//     </>\n//   )\n// }\n\n// URL = '/notes/courseId'\n// function AllVideos(){\n//   let { url } = useRouteMatch()\n//   let { courseId } = useParams()\n//   return (\n//     <>\n//     <div>List of videos for course : {courseId}</div>\n//     <ul>\n//       <li><Link to={`${url}/v1`}>Video 1</Link></li>\n//       <li><Link to={`${url}/v2`}>Video 2</Link></li>\n//       <li><Link to={`${url}/v3`}>Video 3</Link></li>\n//     </ul>\n//     </>\n//   )\n// }\n\n// URL = '/notes/:courseId/:videoId'\nfunction CourseNotes() {\n  let { courseId, videoId } = useParams()\n  return (\n    <>\n    <div>List of notes for the video \"{videoId}\" of course \"{courseId}\"</div>\n    <ul>\n      <li>Note #1</li>\n      <li>Note #2</li>\n      <li>Note #3</li>\n    </ul>\n    </>\n  )\n}\n\n// URL = '/video/:videoId'\n// function VideoNotes(){\n//   return <div>You can take down notes here</div>\n// }","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'antd/dist/antd.css';\n\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}
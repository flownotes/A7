(this.webpackJsonpflownotes=this.webpackJsonpflownotes||[]).push([[0],{144:function(e,t,n){},154:function(e,t,n){},156:function(e,t,n){},158:function(e,t,n){},169:function(e,t,n){},170:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n.n(i),s=n(30),a=n.n(s),r=(n(143),n(69)),o=n(29),l=n(12),d=n(13),u=n(15),h=n(14),j=n(176),p=n(39),v=n(181),b=(n(144),n(2)),g=j.a.Search;function f(){return Object(b.jsx)("div",{className:"home-shell",children:Object(b.jsxs)("div",{className:"home-content",children:[Object(b.jsx)(m,{}),Object(b.jsx)(x,{}),Object(b.jsx)("p",{className:"or-seperator",children:"OR"}),Object(b.jsx)(y,{})]})})}function m(){return Object(b.jsxs)("div",{className:"logo-panel",children:[Object(b.jsx)("h1",{children:"FlowNotes"}),Object(b.jsx)("img",{src:"/logo192.png",alt:"FlowNotes Logo"})]})}var O=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).onSearch=function(e){if(""!==e){var t=i.getVideoId(e);""===t?i.setState({error:!0}):i.props.history.push("/video/".concat(t))}},i.state={error:!1},i.inputRef=null,i}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.inputRef.focus({cursor:"end"})}},{key:"getVideoId",value:function(e){e.startsWith("http")||(e="https://"+e,console.log(e));var t="";try{t=new URL(e)}catch(n){return console.log(n),""}return"www.youtube.com"!=t.host&&"youtube.com"!=t.host||"/watch"!=t.pathname?"":t.searchParams.get("v")}},{key:"render",value:function(){var e=this,t=Object(b.jsx)("p",{className:"err-msg",children:"Please ensure that the URL is formatted correctly!"});return Object(b.jsxs)("div",{className:"video-link-form",children:[Object(b.jsx)("h2",{children:"Video Link"}),Object(b.jsx)("p",{children:"To start or continue taking notes on a video."}),Object(b.jsx)(g,{placeholder:"Enter video link",ref:function(t){return e.inputRef=t},allowClear:!0,enterButton:Object(b.jsx)(v.a,{}),onSearch:this.onSearch}),this.state.error?t:null]})}}]),n}(c.a.Component),x=Object(o.i)(O);function y(){var e=Object(b.jsx)(v.a,{style:{display:"flex",fontSize:"22px"}}),t=Object(o.g)();return Object(b.jsxs)("div",{className:"notes-link",children:[Object(b.jsxs)(p.a,{type:"primary",size:"large",shape:"round",style:{display:"flex",alignItems:"center"},onClick:function(e){t.push("/notes")},children:["Notes Manager ",e]}),Object(b.jsx)("p",{children:"To view your previous notes"})]})}function N(e){var t=e.onClick,n=e.style||{};return n=Object.assign({height:"100px",background:"#1f1f1f",borderRadius:"20%",padding:"7px",cursor:"pointer"},n),Object(b.jsx)("img",{className:"logo",src:"/logo192.png",alt:"FlowNotes Logo",style:n,onClick:t})}var C=n(179),k=n(134),S=n(177),D=n(180),w=n(174),T=n(182),E=n(183),M=n(184),I=[{id:"nid1",timestamp:190,content:"Test content",tags:["git","html","vcs"]},{id:"nid2",timestamp:255,content:"Test content",tags:["exam","logistics"]},{id:"nid3",timestamp:441,content:"Test content",tags:["web","animation","git"]},{id:"nid4",timestamp:590,content:"Test content",tags:["css","js","design"]},{id:"nid5",timestamp:681,content:"Test content",tags:["exam"]},{id:"nid6",timestamp:1220,content:"Test content",tags:["web","html","js"]},{id:"nid7",timestamp:1554,content:"Test content",tags:["design","web","exam"]}],A=[{id:"90QvQ3p6brk",title:"L15 - Software Engineering in practice",length:48,notes:JSON.parse(JSON.stringify(I)),image:"/thumbnails/th1.jpg"},{id:"LzELw8k1FEY",title:"L14 - Time management and estimation",length:51,notes:JSON.parse(JSON.stringify(I)),image:"/thumbnails/th2.jpg"},{id:"eRcAf69IdCk",title:"L13 - Agile and sprints",length:48,notes:JSON.parse(JSON.stringify(I)),image:"/thumbnails/th3.jpg"},{id:"TVpGb5Jj0GY",title:"L12 - Why your manager is wrong",length:56,notes:JSON.parse(JSON.stringify(I)),image:"/thumbnails/th4.jpg"},{id:"kzvt3g8pUHQ",title:"L11 - Version control and automation",length:43,notes:JSON.parse(JSON.stringify(I)),image:"/thumbnails/th5.jpg"},{id:"4NKaIclN2fk",title:"L10 - Software Engineering in practice",length:58,notes:JSON.parse(JSON.stringify(I)),image:"/thumbnails/th6.jpg"}],R={cid1:{code:"CSE 110",name:"Software Engineering",vcount:14,active:!0,videos:JSON.parse(JSON.stringify(A))},cid2:{code:"CSE 141",name:"Introduction to Computer Architecture",vcount:12,active:!0,videos:JSON.parse(JSON.stringify(A))},cid3:{code:"CSE 121",name:"Systems Design",vcount:15,active:!0,videos:JSON.parse(JSON.stringify(A))},cid4:{code:"CSE 101",name:"Computational Thinking",vcount:9,active:!0,videos:JSON.parse(JSON.stringify(A))},cid5:{code:"CSE 100",name:"Basic CS stuff",vcount:15,active:!1,videos:JSON.parse(JSON.stringify(A))},cid6:{code:"CSE 111",name:"Web design and development",vcount:9,active:!1,videos:JSON.parse(JSON.stringify(A))},unclassified:{code:"Unclassified",name:"Videos which belong to no class",vcount:0,active:!0,videos:[]}},L=R;window.data=R;n(154);var U=C.a.Panel,V=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).currentCourseDetails=function(){var e="",t="";return null!==i.currentCourse&&(e=L[i.currentCourse].code||"",t=L[i.currentCourse].name||""),{code:e,name:t}},i.toggleAdd=function(){return i.setState({addModal:!i.state.addModal})},i.toggleEdit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i.currentCourse=i.state.editModal?null:e,i.setState({editModal:!i.state.editModal})},i.toggleArchive=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i.currentCourse=i.state.archiveModal?null:e,i.setState({archiveModal:!i.state.archiveModal})},i.toggleUnArchive=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i.currentCourse=i.state.unArchiveModal?null:e,i.setState({unArchiveModal:!i.state.unArchiveModal})},i.toggleDelete=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i.currentCourse=i.state.deleteModal?null:e,i.setState({deleteModal:!i.state.deleteModal})},i.addModalBody=function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:"label",children:"Course Code"}),Object(b.jsx)(j.a,{placeholder:"Eg. 'CSE 170'",ref:function(e){return i.codeInputRef=e}}),Object(b.jsx)("p",{className:"label",children:"Course Title"}),Object(b.jsx)(j.a,{placeholder:"Eg. 'Interaction Design'",ref:function(e){return i.nameInputRef=e}})]})},i.editModalBody=function(){var e=i.currentCourseDetails(),t=e.code,n=void 0===t?"":t,c=e.name,s=void 0===c?"":c;return Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:"label",children:"Course Code"}),Object(b.jsx)(j.a,{placeholder:"Eg. 'CSE 170'",defaultValue:n,ref:function(e){return i.codeInputRef=e}}),Object(b.jsx)("p",{className:"label",children:"Course Title"}),Object(b.jsx)(j.a,{placeholder:"Eg. 'Interaction Design'",defaultValue:s,ref:function(e){return i.nameInputRef=e}})]})},i.archiveModalBody=function(){var e=i.currentCourseDetails(),t=e.code,n=void 0===t?"":t,c=e.name,s=void 0===c?"":c;return Object(b.jsxs)("div",{className:"archive-message",children:[Object(b.jsx)("p",{children:"Are you sure you want to archive"}),Object(b.jsx)("h2",{children:n}),Object(b.jsx)("h3",{children:s})]})},i.unArchiveModalBody=function(){var e=i.currentCourseDetails(),t=e.code,n=void 0===t?"":t,c=e.name,s=void 0===c?"":c;return Object(b.jsxs)("div",{className:"archive-message",children:[Object(b.jsx)("p",{children:"Are you sure you want to unarchive"}),Object(b.jsx)("h2",{children:n}),Object(b.jsx)("h3",{children:s})]})},i.deleteModalBody=function(){var e=i.currentCourseDetails(),t=e.code,n=void 0===t?"":t,c=e.name,s=void 0===c?"":c;return Object(b.jsxs)("div",{className:"error-message",children:[Object(b.jsx)("p",{children:"Are you sure you want to delete"}),Object(b.jsx)("h2",{children:n}),Object(b.jsx)("h3",{children:s}),Object(b.jsxs)("span",{children:[Object(b.jsx)("b",{children:"Danger!"})," Once you've deleted the course you cannot get it back, it is permanent."]})]})},i.addCourse=function(){var e=i.codeInputRef.state.value,t=i.nameInputRef.state.value,n="cid"+Date.now().toString();L[n]={code:e,name:t,vcount:0,active:!0},i.toggleAdd(),k.b.success(Object(b.jsxs)("span",{children:['Course "',Object(b.jsx)("b",{children:e})," : ",t,'" successfully created!']}))},i.editCourse=function(){var e=i.codeInputRef.state.value,t=i.nameInputRef.state.value,n=i.currentCourse;L[n]=Object.assign(L[n],{code:e,name:t}),i.toggleEdit(),k.b.success(Object(b.jsxs)("span",{children:['Course "',Object(b.jsx)("b",{children:e})," : ",t,'" successfully edited!']}))},i.archiveCourse=function(){var e=L[i.currentCourse],t=e.code,n=e.name;L[i.currentCourse].active=!1,i.toggleArchive(),k.b.success(Object(b.jsxs)("span",{children:['Course "',Object(b.jsx)("b",{children:t})," : ",n,'" successfully archived!']}))},i.unArchiveCourse=function(){var e=L[i.currentCourse],t=e.code,n=e.name;L[i.currentCourse].active=!0,i.toggleUnArchive(),k.b.success(Object(b.jsxs)("span",{children:['Course "',Object(b.jsx)("b",{children:t})," : ",n,'" successfully unarchived!']}))},i.deleteCourse=function(){var e=L[i.currentCourse],t=e.code,n=e.name;delete L[i.currentCourse],i.toggleDelete(),k.b.success(Object(b.jsxs)("span",{children:['Course "',Object(b.jsx)("b",{children:t})," : ",n,'" successfully deleted!']}))},i.state={addModal:!1,editModal:!1,archiveModal:!1,deleteModal:!1,unArchiveModal:!1},i.codeInputRef=null,i.nameInputRef=null,i.currentCourse=null,i}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=Object.keys(L),n=this.state,i=n.addModal,c=n.editModal,s=n.archiveModal,a=n.deleteModal,r=n.unArchiveModal;return Object(b.jsxs)("div",{className:"courses-shell",children:[Object(b.jsx)(J,{onAddCourse:this.toggleAdd}),Object(b.jsx)("div",{className:"course-container",children:Object(b.jsxs)(C.a,{defaultActiveKey:["1"],ghost:!0,expandIconPosition:"right",className:"course-collapse more-specificity",children:[Object(b.jsx)(U,{header:"Active",children:t.filter((function(e){return L[e].active})).map((function(t){return Object(b.jsx)(P,{cid:t,onEdit:function(){return e.toggleEdit(t)},onArchive:function(){return e.toggleArchive(t)},onDelete:function(){return e.toggleDelete(t)}},t)}))},"1"),Object(b.jsx)(U,{header:"Archived",children:t.filter((function(e){return!L[e].active})).map((function(t){return Object(b.jsx)(P,{cid:t,onEdit:function(){return e.toggleEdit(t)},onUnArchive:function(){return e.toggleUnArchive(t)},onDelete:function(){return e.toggleDelete(t)}},t)}))},"2")]})}),Object(b.jsx)(S.a,{title:"Create course",visible:i,okText:"Create",onOk:this.addCourse,onCancel:this.toggleAdd,destroyOnClose:!0,className:"course-config-modal",children:this.addModalBody()}),Object(b.jsx)(S.a,{title:"Edit course",visible:c,okText:"Update",cancelText:"Discard changes",onOk:this.editCourse,onCancel:this.toggleEdit,destroyOnClose:!0,className:"course-config-modal",children:this.editModalBody()}),Object(b.jsx)(S.a,{title:Object(b.jsxs)("span",{className:"title",children:[Object(b.jsx)(T.a,{className:"arch-icon"})," Archive course"]}),visible:s,okText:"Archive",okType:"danger",onOk:this.archiveCourse,onCancel:this.toggleArchive,destroyOnClose:!0,className:"course-config-modal",children:this.archiveModalBody()}),Object(b.jsx)(S.a,{title:Object(b.jsx)("span",{className:"title",children:"Unarchive course"}),visible:r,okText:"Unarchive",okType:"primary",onOk:this.unArchiveCourse,onCancel:this.toggleUnArchive,destroyOnClose:!0,className:"course-config-modal",children:this.unArchiveModalBody()}),Object(b.jsx)(S.a,{title:Object(b.jsxs)("span",{className:"title",children:[Object(b.jsx)(T.a,{className:"delt-icon"})," Delete course"]}),visible:a,okText:"Delete the course",cancelText:"No, go back",onOk:this.deleteCourse,okType:"danger",onCancel:this.toggleDelete,cancelButtonProps:{type:"primary"},destroyOnClose:!0,className:"course-config-modal",children:this.deleteModalBody()})]})}}]),n}(c.a.Component);function J(e){var t=e.onAddCourse,n=Object(o.g)();return Object(b.jsxs)("nav",{className:"all-courses-nav",children:[Object(b.jsx)(N,{style:{height:"36px",width:"36px",padding:"3px"},onClick:function(){n.push("/")}}),Object(b.jsx)("p",{children:"COURSES"}),Object(b.jsx)(E.a,{onClick:t})]})}function P(e){var t=L[e.cid],n=t.name,i=t.code,c=t.vcount,s=e.onEdit,a=e.onArchive,r=e.onDelete,l=e.onUnArchive,d=Object(o.g)(),u=B({onEdit:s,onArchive:a,onDelete:r,onUnArchive:l});return Object(b.jsxs)("div",{className:"course-card",onClick:function(){d.push("/notes/".concat(e.cid))},children:[Object(b.jsxs)("div",{className:"course-card-header",children:[Object(b.jsx)("h2",{className:"course-code",children:i}),Object(b.jsx)(D.a,{overlay:u,trigger:["click"],placement:"bottomRight",overlayClassName:"course-card-edit",children:Object(b.jsx)(M.a,{onClick:function(e){return e.stopPropagation()}})})]}),Object(b.jsx)("p",{className:"course-name",children:n}),Object(b.jsxs)("p",{className:"course-vcount",children:[c," videos"]})]})}var B=function(e){var t=e.onEdit,n=e.onArchive,i=e.onDelete,c=e.onUnArchive;return Object(b.jsxs)(w.a,{onClick:function(e){return e.domEvent.stopPropagation()},children:[Object(b.jsx)(w.a.Item,{onClick:t,children:"Edit Course"}),Object(b.jsx)(w.a.Divider,{}),n?Object(b.jsx)(w.a.Item,{onClick:n,children:"Archive Course"}):Object(b.jsx)(w.a.Item,{onClick:c,children:"Unarchive Course"}),Object(b.jsx)(w.a.Divider,{}),Object(b.jsx)(w.a.Item,{danger:!0,onClick:i,children:"Delete Course"})]})},F=n(1),z=n(175),W=n(104),Y=n(37),q=n.n(Y),H=n(52);function K(e){return e&&0===Object.keys(e).length&&e.constructor===Object}function Q(e){var t=Math.floor(e/3600);e%=3600;var n=Math.floor(e/60);e%=60;var i=t>0?t.toString().padStart(2,"0")+":":"",c=n.toString().padStart(2,0)+":",s=e.toString().padStart(2,0);return"".concat(i).concat(c).concat(s)}function _(){return(_=Object(H.a)(q.a.mark((function e(t){var n,i,c,s,a,r,o,l,d,u;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){var t,n,i,c,s,a,r;for(c={},a=0,r=(i=e.split("&")).length;a<r;a++){if(n=i[a],t=decodeURIComponent(n.split("=")[0]),s=decodeURIComponent(n.split("=")[1]||""),"url"==t){var o=new URLSearchParams(s).get("lsig");c.lsig=o}c[t]=s}return c},i=function(e){var t,n,i,c,s,a={};for(i=0,c=(s=e.streamingData.formats).length;i<c;i++){var r=s[i];n=r.mimeType.split(";")[0],t=r.quality,r.original_url=r.url,a[n+" "+t]=r}return a},c=function(e,t,n){var i,c,s,a,r;for(c in s=null,i=null,r=e.sources)(a=r[c]).mimeType.includes(t)&&(a.quality.match(n)?i=a:s=a);return i||s},e.next=5,fetch("https://at8u8s124e.execute-api.eu-west-1.amazonaws.com/prod?video_id=".concat(t),{headers:{"Content-Type":"text/plain"}});case 5:return s=e.sent,e.next=8,s.text();case 8:if(a=e.sent,"fail"!==(r=n(a)).status){e.next=13;break}return console.error("ERROR, failed to get video details"),e.abrupt("return",r);case 13:return console.log("video",r),o=JSON.parse(r.player_response),r.sources=i(o),l=c(r,"video/mp4","hd720"),d=o.videoDetails.title.split("+").join(" "),u=o.videoDetails.thumbnail.thumbnails[3]||o.videoDetails.thumbnail.thumbnails[0],e.abrupt("return",Object(F.a)(Object(F.a)({},l),{},{title:d,thumbnail:u.url}));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(156);var G=C.a.Panel;function X(e,t){return e.filter((function(e){return t.some((function(t){return e.tags.includes(t)}))}))}var Z=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var i;Object(l.a)(this,n),(i=t.call(this,e)).goToHome=function(){return i.props.history.push("/")},i.getCid=function(){return i.props.match.params.courseId},i.getTagsOpts=function(){var e=i.getCid(),t=L[e].videos,n=[],c={};return t.map((function(e){return e.notes.map((function(e){return e.tags.map((function(e){return c[e]=!0}))}))})),Object.keys(c).map((function(e){return n.push({label:e,value:e})})),n},i.updateFilter=function(){var e=i.props,t=e.history,n=e.location;i.setState({filterTags:i.filterTags});var c=new URLSearchParams("");i.filterTags.forEach((function(e){return c.append("tags",e)})),t.replace("".concat(n.pathname,"?").concat(c))},i.onVideoDeleted=function(e){var t=i.getCid();L[t].videos=L[t].videos.filter((function(t){return t.id!=e})),i.forceUpdate()},i.getNav=function(){var e=i.getTagsOpts();return Object(b.jsxs)("nav",{className:"all-videos-nav",children:[Object(b.jsx)(N,{style:{height:"36px",width:"36px",padding:"3px"},onClick:i.goToHome}),Object(b.jsx)(z.a,{mode:"tags",className:"filter-tags",placeholder:"Search by tags",showSearch:!0,allowClear:!0,defaultValue:i.filterTags,options:e,onDropdownVisibleChange:function(e){i.filterOpen=e,e||i.updateFilter()},onChange:function(e){i.filterTags=e,i.filterOpen||i.updateFilter()}}),Object(b.jsx)(W.a,{style:{fontSize:"22px"}})]})},i.getSearchResults=function(e,t){var n=(e=e.map((function(e){return Object(F.a)(Object(F.a)({},e),{},{notes:X(e.notes,t)})})).filter((function(e){return e.notes.length>0}))).map((function(e){return e.id}));return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"search-results",children:["You are currently searching for \xa0",t.map((function(e){return Object(b.jsx)("span",{className:"s-tag",children:e},e)}))]}),Object(b.jsx)(C.a,{ghost:!0,defaultActiveKey:n,expandIconPosition:"right",className:"video-search-collapse",children:e.map((function(e){return Object(b.jsx)(G,{header:e.title,children:e.notes.map((function(t){return Object(b.jsx)(te,{data:t,vid:e.id},t.id)}))},e.id)}))})]})},i.filterTags=[];var c=i.props.location.search||"",s=new URLSearchParams(c).getAll("tags");return s.length>0&&(i.filterTags=s),i.filterOpen=!1,i.state={filterTags:i.filterTags},i}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props.match.params.courseId,n=this.state.filterTags,i=L[t],c=i.videos;return Object(b.jsxs)("div",{className:"videos-shell",children:[this.getNav(),Object(b.jsxs)("div",{className:"video-container",children:[Object(b.jsxs)("h2",{className:"course-title",children:[i.code,": ",i.name]}),n.length?this.getSearchResults(c,n):c.map((function(t){return Object(b.jsx)(ee,{video:t,onDeleted:function(){return e.onVideoDeleted(t.id)}},t.id)}))]})]})}}]),n}(c.a.Component),$=Object(o.i)(Z);function ee(e){var t=e.video,n=t.id,i=t.title,c=t.length,s=t.image,a=t.notes,r=a.length,l=Object(o.g)(),d=function(){var t="You have ".concat(a.length," notes and will lose all of them.\n    This action is irreversible!");S.a.confirm({title:"Are you sure you want to delete this lecture?",content:t,okText:"Delete",cancelText:"No, keep",okType:"danger",onOk:e.onDeleted})},u=Math.floor(c/60),h=c%60,j=u>0?"".concat(u," hours ").concat(h," min"):"".concat(h," min");return Object(b.jsxs)("div",{className:"video-card",onClick:function(){l.push("/video/".concat(n))},children:[Object(b.jsxs)("div",{className:"video-card-header",children:[Object(b.jsx)("h2",{className:"video-title",children:i}),Object(b.jsx)(D.a,{overlay:Object(b.jsx)(w.a,{onClick:function(e){return e.domEvent.stopPropagation()},children:Object(b.jsx)(w.a.Item,{danger:!0,onClick:d,children:"Delete Lecture"})}),trigger:["click"],placement:"bottomRight",overlayClassName:"video-card-edit",children:Object(b.jsx)(M.a,{onClick:function(e){return e.stopPropagation()}})})]}),Object(b.jsxs)("p",{className:"video-details",children:[r," Notes ",Object(b.jsx)("b",{children:"\xb7"})," ",j]}),Object(b.jsx)("img",{src:s,className:"thumbnail",alt:"Thumbnail for ".concat(i)})]})}function te(e){var t=Object(o.g)(),n=e.data,i=n.tags,c=n.timestamp,s=n.content,a=void 0===s?"":s;return Object(b.jsxs)("div",{className:"note-item",children:[Object(b.jsx)("div",{className:"note-top",children:Object(b.jsx)("div",{className:"note-ts",onClick:function(){return n=c,void t.push("/video/".concat(e.vid,"?t=").concat(n));var n},children:Q(c)})}),Object(b.jsx)("div",{className:"note-content",children:a}),Object(b.jsx)("div",{className:"note-tags",children:i.map((function(e){return Object(b.jsxs)("div",{className:"note-tag",children:["#",e]},e)}))})]})}var ne=n(178),ie=n(173),ce=n(172),se=n(185),ae=n(186),re=n(187),oe=n(49),le=n.n(oe),de=(n(158),j.a.TextArea);function ue(e){var t,n=!1;for(t in L)if(L[t].videos.find((function(t){return t.id===e}))){n=!0;break}return n?Object(F.a)({cid:t},L[t]):{cid:"unclassified"}}function he(e){var t=L[e].videos,n=[],i={};return t.map((function(e){return e.notes.map((function(e){return e.tags.map((function(e){return i[e]=!0}))}))})),Object.keys(i).map((function(e){return n.push({label:e,value:e})})),n}var je=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).goToHome=function(){return i.props.history.push("/")},i.getVideoId=function(){return i.props.match.params.videoId},i.getNav=function(){var e=he(ue(i.getVideoId()).cid);return Object(b.jsxs)("nav",{className:"notes-nav",children:[Object(b.jsx)(N,{style:{height:"36px",width:"36px",padding:"3px"},onClick:i.goToHome}),Object(b.jsxs)("div",{className:"filter-select",children:[Object(b.jsx)(z.a,{mode:"tags",className:"filter-tags specificiy",placeholder:"Search by tags",showSearch:!0,allowClear:!0,options:e,onDropdownVisibleChange:function(e){i.filterOpen=e,e||i.updateFilter()},onChange:function(e){i.filterTags=e,i.filterOpen||i.updateFilter()}}),Object(b.jsx)(W.a,{style:{fontSize:"22px"}})]})]})},i.updateFilter=function(){i.setState({search:i.filterTags})},i.onNoteEditing=function(e){i.setState({editingNote:e})},i.onNoteEdited=function(e,t){if(e){var n=i.state.lectureDetails.notes,c=n.findIndex((function(e){return e.id===t.id}));n[c]=t,n.sort((function(e,t){return e.timestamp-t.timestamp}))}i.setState({editingNote:null,newNote:!1}),e&&k.b.success('Note "'.concat(Q(t.timestamp),'" successfully edited!'))},i.onNoteDeleted=function(e){var t=i.state.lectureDetails,n=t.notes.filter((function(t){return t.id!==e})),c=Object(F.a)(Object(F.a)({},t),{},{notes:n});!function(e){var t=ue(e.id),n=t.videos.findIndex((function(t){return t.id==e.id}));t.videos[n]=e}(c),i.setState({lectureDetails:c,newNote:!1,editingNote:null}),k.b.success("Note successfully deleted!")},i.onNoteAdded=function(){var e="nid-"+Math.random().toString(36).replace("0.",""),t={id:e,timestamp:Math.round(document.querySelector("#vid").currentTime),content:"",tags:[]},n=i.state.lectureDetails.notes;n.push(t),n.sort((function(e,t){return e.timestamp-t.timestamp})),i.setState({editingNote:e,pinned:!1,newNote:!0}),document.querySelector("#vid").pause()},i.updateTitleClass=function(){var e=ue(i.getVideoId()).cid,t=i.tempEdits.class;t&&t!==e&&(L[e].videos=L[e].videos.filter((function(e){return e.id!==i.getVideoId()})),L[t].videos.unshift(i.state.lectureDetails)),i.tempEdits.title&&(i.state.lectureDetails.title=i.tempEdits.title),i.setState({editingLecture:!1}),i.tempEdits={}},i.getTitleModal=function(){var e=function(){for(var e=[],t=0,n=Object.keys(L);t<n.length;t++){var i=n[t],c="".concat(L[i].code," : ").concat(L[i].name);e.push({value:i,label:c})}return e}(),t=ue(i.getVideoId()).cid;return Object(b.jsx)(S.a,{title:"Edit lecture details",visible:i.state.editingLecture,okText:"Update",cancelText:"Discard changes",onCancel:function(){i.setState({editingLecture:!1}),i.tempEdits={}},onOk:i.updateTitleClass,destroyOnClose:!0,className:"lecture-edit-modal",children:Object(b.jsxs)("div",{className:"lecture-edit-body",children:[Object(b.jsx)("p",{className:"label",children:"Title"}),Object(b.jsx)(j.a,{placeholder:"Lecture Title",className:"title-input",defaultValue:i.state.lectureDetails.title,onChange:function(e){return i.tempEdits.title=e.target.value}}),Object(b.jsx)("p",{className:"label",children:"Course"}),Object(b.jsx)(z.a,{defaultValue:t,options:e,onChange:function(e){return i.tempEdits.class=e}})]})})},i.getLoadingDOM=function(){return Object(b.jsx)(ne.a,{active:!0})},i.state={ytDetails:{},lectureDetails:{},editingNote:null,newNote:!1,editingLecture:!1,search:[],pinned:!0},i.tempEdits={},i.filterTags=[],i.filterOpen=!1,i}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.getVideoId(),n=function(e){var t,n,i=!1;for(t in L)if(n=L[t].videos.find((function(t){return t.id===e}))){i=!0;break}return i?n:{}}(t);(function(e){return _.apply(this,arguments)})(t).then((function(i){if(K(n)){var c=(a=parseInt(i.approxDurationMs)||0,Math.round(a/6e4));n={id:t,title:i.title,notes:[],image:i.thumbnail,length:c},s=n,L["unclassified"].videos.push(s)}var s,a;e.setState({ytDetails:i,lectureDetails:n})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.lectureDetails,i=t.ytDetails.url,c=t.editingLecture,s=t.editingNote,a=t.pinned,r=t.search,l=t.newNote,d=this.getVideoId(),u=K(n),h=ue(d),j=n.notes;r.length>0&&(j=j.filter((function(e){return function(e,t){return t.some((function(t){return e.tags.includes(t)}))}(e,r)})));var p=!(s||r.length>0);return Object(b.jsxs)("div",{className:"notes-shell",children:[this.getNav(),Object(b.jsx)(be,{url:i,pinned:a}),u?this.getLoadingDOM():Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"notes-content-wrapper",children:[Object(b.jsxs)("div",{className:"lecture-details",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{className:"lecture-title",children:n.title}),Object(b.jsxs)("span",{className:"lecture-course",children:[h.code," ",Object(b.jsx)("b",{children:"\xb7"})," ",h.name]})]}),Object(b.jsx)(se.a,{style:{fontSize:"20px",padding:"0 10px",cursor:"pointer"},onClick:function(){return e.setState({editingLecture:!0,tempEdits:{}})}}),this.getTitleModal()]}),Object(b.jsx)(o.a,{when:!(!s&&!c),message:function(e){return"You have unsaved edits! Are you sure you want to move away?"}}),r.length>0?Object(b.jsxs)("div",{className:"search-results",children:["You are currently searching for \xa0",r.map((function(e){return Object(b.jsx)("span",{className:"s-tag",children:e},e)})),Object(b.jsx)("br",{}),Object(b.jsx)("span",{style:{color:"gray"},children:"To edit or create new notes, please clear the search."})]}):null,Object(b.jsx)("div",{className:"notes-container",children:j.map((function(t){return Object(b.jsx)(ve,{data:t,vid:d,editMode:s==t.id,editable:p,newNote:l,onEditing:function(){return e.onNoteEditing(t.id)},onDeleted:function(){return e.onNoteDeleted(t.id)},onEdited:e.onNoteEdited},t.id)}))})]}),Object(b.jsxs)("div",{className:"notes-footer",children:[Object(b.jsx)("div",{className:"left-side",children:p?Object(b.jsx)(E.a,{onClick:this.onNoteAdded,style:{marginRight:"18px"}}):null}),Object(b.jsx)("div",{className:"right-side",children:a?Object(b.jsx)(ae.a,{onClick:function(){return e.setState({pinned:!1})}}):Object(b.jsx)(re.a,{onClick:function(){return e.setState({pinned:!0})}})})]})]})]})}}]),n}(c.a.Component),pe=Object(o.i)(je),ve=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).onTimestamp=function(e){document.querySelector("#vid").currentTime=e},i.onEditing=function(){i.props.onEditing()},i.onDeleteing=function(){S.a.confirm({title:"Are you sure you want to delete this note?",okText:"Delete",cancelText:"No, keep",okType:"danger",onOk:i.props.onDeleted})},i.getEditMenu=function(){return Object(b.jsxs)(w.a,{onClick:function(e){return e.domEvent.stopPropagation()},children:[Object(b.jsx)(w.a.Item,{onClick:i.props.onEditing,children:"Edit Note"}),Object(b.jsx)(w.a.Divider,{}),Object(b.jsx)(w.a.Item,{danger:!0,onClick:i.onDeleteing,children:"Delete Note"})]})},i.onDone=function(e){if(e){var t=Object(F.a)(Object(F.a)({},i.props.data),i.editData);i.props.onEdited(e,t)}else i.props.newNote?i.props.onDeleted():i.props.onEdited(e,null);i.editData={}},i.timeUpdated=function(e,t){return i.editData.timestamp=function(e){var t=e.split(":").map((function(e){return parseInt(e)}));return 3==t.length?3600*t[0]+60*t[1]+t[2]:60*t[0]+t[1]}(t)},i.contentUpdated=function(e){return i.editData.content=e.target.value},i.getEditBody=function(){var e=i.props.data,t=e.timestamp,n=e.content,c=e.tags,s=i.props.newNote,a=t>=3600?"hh:mm:ss":"mm:ss",r=le()(Q(t),a),o=Object(b.jsxs)("div",{children:[Object(b.jsx)(p.a,{danger:!0,onClick:function(){return i.onDone(!1)},style:{marginRight:"10px"},children:"Discard"}),Object(b.jsx)(p.a,{type:"primary",onClick:function(){return i.onDone(!0)},children:s?"Create":"Save"})]}),l=he(ue(i.props.vid).cid);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"note-top-edit",children:[Object(b.jsx)(ie.a,{defaultValue:r,format:a,showNow:!1,onChange:i.timeUpdated}),o]}),Object(b.jsx)("div",{className:"note-content-edit",children:Object(b.jsx)(de,{rows:3,defaultValue:n||"",onChange:i.contentUpdated})}),Object(b.jsxs)("div",{className:"note-tags-edit",children:[Object(b.jsx)(z.a,{mode:"tags",className:"edit-tags",placeholder:"add tags",showSearch:!0,options:l,defaultValue:c,onChange:function(e){return i.editData.tags=e}}),Object(b.jsx)(E.a,{})]})]})},i.editData={},i.note=c.a.createRef(),i}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(e){e.editMode!=this.props.editMode&&this.note.current.scrollIntoView({behavior:"smooth",block:"center"})}},{key:"componentDidMount",value:function(){1==this.props.editMode&&this.note.current.scrollIntoView({behavior:"smooth",block:"center"})}},{key:"render",value:function(){var e=this,t=this.props,n=t.editMode,i=t.editable,c=this.props.data,s=c.tags,a=c.timestamp,r=c.content,o=void 0===r?"":r;return Object(b.jsx)("div",{className:"note-item",ref:this.note,children:n?this.getEditBody():Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"note-top",children:[Object(b.jsx)("div",{className:"note-ts",onClick:function(){return e.onTimestamp(a)},children:Q(a)}),Object(b.jsx)("div",{className:"note-edit",style:i?{}:{display:"none"},children:Object(b.jsx)(D.a,{overlay:this.getEditMenu(),trigger:["click"],placement:"bottomRight",overlayClassName:"note-item-edit",children:Object(b.jsx)(M.a,{onClick:function(e){return e.stopPropagation()}})})})]}),Object(b.jsx)("div",{className:"note-content",children:o}),Object(b.jsx)("div",{className:"note-tags",children:s.map((function(e){return Object(b.jsxs)("div",{className:"note-tag",children:["#",e]},e)}))})]})})}}]),n}(c.a.Component),be=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).getVideoDOM=function(){var e=new URLSearchParams(window.location.search),t=0;null!=e.get("t")&&(t=parseInt(e.get("t")));var n=i.props.url||"",c="".concat(i.state.width*(9/16),"px");return Object(b.jsx)("video",{id:"vid",autoPlay:!0,controls:!0,src:"".concat(n,"#t=").concat(t),style:{height:c}})},i.getLoadingDOM=function(){return Object(b.jsx)(ce.a,{tip:"Loading..."})},i.player=c.a.createRef(),i.state={video:null,width:null},i}return Object(d.a)(n,[{key:"componentWillUnmount",value:function(){delete this.observer}},{key:"getTime",value:function(){}},{key:"getLength",value:function(){}},{key:"seek",value:function(){}},{key:"play",value:function(e){}},{key:"componentDidMount",value:function(){var e,t=this;this.observer=new ResizeObserver((function(){var e=t.player.current;e&&e.offsetWidth!=t.state.width&&t.setState({width:t.player.current.offsetWidth})})),this.observer.observe(this.player.current),this.setState({width:null===(e=this.player.current)||void 0===e?void 0:e.offsetWidth})}},{key:"render",value:function(){var e=this.state.width,t=this.props,n=t.url,i=t.pinned,c=n?this.getVideoDOM():this.getLoadingDOM(),s="".concat(this.state.width*(9/16),"px"),a=i?"video-player pinned":"video-player";return Object(b.jsx)("div",{className:a,ref:this.player,children:e&&Object(b.jsx)("div",{className:"video-container",style:{height:s},children:c})})}}]),n}(c.a.Component);n(169);function ge(){return Object(b.jsx)(r.a,{children:Object(b.jsx)("div",{className:"app-shell",children:Object(b.jsxs)(o.d,{children:[Object(b.jsx)(o.b,{exact:!0,path:"/",children:Object(b.jsx)(f,{})}),Object(b.jsx)(o.b,{exact:!0,path:"/notes",children:Object(b.jsx)(V,{})}),Object(b.jsx)(o.b,{exact:!0,path:"/notes/:courseId",children:Object(b.jsx)($,{})}),Object(b.jsx)(o.b,{path:"/notes/:courseId/:videoId",children:Object(b.jsx)(Oe,{})}),Object(b.jsx)(o.b,{path:"/video/:videoId",children:Object(b.jsx)(pe,{})}),Object(b.jsx)(o.b,{path:"/about",children:Object(b.jsx)(fe,{})}),Object(b.jsx)(o.b,{path:"*",children:Object(b.jsx)(me,{})})]})})})}function fe(){return Object(b.jsx)("h2",{children:"About"})}function me(){return Object(b.jsx)("h2",{children:"404"})}function Oe(){var e=Object(o.h)(),t=e.courseId,n=e.videoId;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{children:['List of notes for the video "',n,'" of course "',t,'"']}),Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:"Note #1"}),Object(b.jsx)("li",{children:"Note #2"}),Object(b.jsx)("li",{children:"Note #3"})]})]})}a.a.render(Object(b.jsx)(ge,{}),document.getElementById("root"))}},[[170,1,2]]]);
//# sourceMappingURL=main.e315fe75.chunk.js.map